{
  "root": "src",
  "deploy" : [
    "export OPENSHIFT_SSHKEYPATH=`mktemp`",
    "export OPENSHIFT_DEPLOYDIR=`mktemp --directory`",
    "export WERCKER_DEPLOY=$WERCKER_ROOT/../deploy",
    "export GIT_SSH=$WERCKER_DEPLOY/gitssh",
    "export SSHKEYPATH=$OPENSHIFT_SSHKEYPATH",
    "echo -e $OPENSHIFT_SSHKEY > $OPENSHIFT_SSHKEYPATH",
    "rsync --archive $WERCKER_ROOT/ $OPENSHIFT_DEPLOYDIR/",
    "cd $OPENSHIFT_DEPLOYDIR",
    "git init",
    "git config user.email \"openshift@wercker.com\"",
    "git config user.name \"wercker\"",
    "git add .",
    "git commit -m 'wercker deploy'",
    "git push -f ssh://$OPENSHIFT_ID@$OPENSHIFT_HOST/~/git/$OPENSHIFT_APPLICATION.git master",
    "rm -f $OPENSHIFT_SSHKEYPATH",
    "rm -rf $OPENSHIFT_DEPLOYDIR"
  ]
}
